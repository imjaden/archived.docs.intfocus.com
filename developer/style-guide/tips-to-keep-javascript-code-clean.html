<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    
    <title>整洁 Javascript 代码 — 胜因学院</title>
    <meta charset="utf-8">
    <meta name="description" content="Vue.js - The Progressive JavaScript Framework">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta property="og:type" content="article">
    <meta property="og:title" content="整洁 Javascript 代码 — Vue.js">
    <meta property="og:description" content="Vue.js - The Progressive JavaScript Framework">
    <meta property="og:image" content="https://cn.vuejs.org//images/logo.png">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="整洁 Javascript 代码 — Vue.js">
    <meta name="twitter:description" content="Vue.js - The Progressive JavaScript Framework">
    <meta name="twitter:image" content="https://cn.vuejs.org/images/logo.png">

    <link rel="icon" href="/images/intfocus.png" type="image/png">

    <meta name="msapplication-TileColor" content="#4fc08d">
    <meta name="theme-color" content="#4fc08d">

    <meta name="msapplication-config" content="browserconfig.xml">
    <link rel="manifest" href="/manifest.json">

    <link href="//code.bdstatic.com/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    
<link rel="stylesheet" href="/css/page.css">


    <script src="/js/vue.js"></script>
    <script>
      Vue.config.productionTip = false;
      window.PAGE_TYPE = "整洁 Javascript 代码";
    </script>
  <meta name="generator" content="Hexo 6.3.0"></head>
  
  <body class="docs">
    <div id="mobile-bar" >
      <a class="menu-button"></a>
      <a class="logo" href="/"></a>
    </div>
    <div id="header">
  <a id="logo" href="/">
    <img src="/images/logo.png" alt="vue logo">
    <span>Intfocus</span>
  </a>
  <ul id="nav">
    <li>
  <form id="search-form">
    <input type="text" id="search-query-nav" class="search-query st-default-search-input">
  </form>
</li>
<li class="nav-dropdown-container learn">
  <a class="nav-link current">生态系统</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><h4>应用实例</h4></li>
    <li>
      <ul>
        <li><a href="/application/syp-wxmp.html" class="nav-link">胜因学院<small>(小程序)</small></a></li>
        <li><a href="/application/syp-android-tv.html" class="nav-link">胜因盒子<small>(TV大屏)</small></a></li>
      </ul>
    </li>
  </ul>
</li>

<li class="nav-dropdown-container learn">
  <a class="nav-link current">开发文档</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="/developer/guide.html" class="nav-link current">规范指南</a></li>
    <li><h4>编程规范</h4></li>
    <li>
      <ul>
        <li><a href="/developer/style-guide/gitlab.html" class="nav-link">Gitlab</a></li>
        <li><a href="/developer/style-guide/java.html" class="nav-link">Java</a></li>
        <li><a href="/developer/style-guide/mysql.html" class="nav-link">MySQL</a></li>
        <li><a href="/developer/style-guide/javascript.html" class="nav-link">Javascript</a></li>
        <li><a href="/developer/style-guide/cdn.html" class="nav-link">CDN 运维</a></li>
      </ul>
    </li>
    <li><h4>开发规范</h4></li>
    <li>
      <ul>
        <li><a href="/developer/environment-guide.html" class="nav-link">环境规范<small></small></a></li>
        <li><a href="/developer/etl-devops-guide.html" class="nav-link">ETL 运维<small></small></a></li>
        <li><a href="/developer/api-design-guide.html" class="nav-link">API 设计<small></small></a></li>
        <li><a href="/developer/rdc-guide.html" class="nav-link">RDC 接口<small></small></a></li>
        <li><a href="/developer/menu-guide.html" class="nav-link">业务菜单<small></small></a></li>
      </ul>
    </li>
    <li><h4>接口文档</h4></li>
    <li>
      <ul>
        <li><a href="/developer/api-guide/syp-wxmp.html" class="nav-link">胜因学院<small>(小程序)</small></a></li>
        <li><a href="/developer/api-guide/datav-report.html" class="nav-link">DataV报表<small>(大屏)</small></a></li>
        <li><a href="/developer/api-guide/java-admin-add-module.html" class="nav-link">添加模块<small>(运营平台)</small></a></li>
      </ul>
    </li>
    <li><h4>项目源码</h4></li>
    <li>
      <ul>
        <li><a href="/developer/project-connections.html" class="nav-link">源码体系</a></li>
        <li><a href="/developer/sypctl-readme.html" class="nav-link">SypCtl 工具</a></li>
        <li><a href="/developer/jenkins-deploy.html" class="nav-link">Jenkins 部署</a></li>
      </ul>
    </li>
  </ul>
</li>

<li class="nav-dropdown-container learn">
  <a class="nav-link current">企业文化</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><h4>职场培训</h4></li>
    <li>
      <ul>
        <li><a href="/corporate-culture/workplace-ceremony.html" class="nav-link">职场共识</a></li>
        <li><a href="/corporate-culture/teamwork.html" class="nav-link">职场协作</a></li>
      </ul>
    </li>
    <li><h4>生命力</h4></li>
    <li>
      <ul>
        <li><a href="/corporate-culture/online-documents.html" class="nav-link">在线文档</a></li>
        <li><a href="/corporate-culture/weekly-publication.html" class="nav-link">胜因周刊</a></li>
      </ul>
    </li>
  </ul>
</li>


<li class="nav-dropdown-container learn">
  <a class="nav-link current">外链导航</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li>
    <a href="https://www.intfocus.com" target="_blank" class="nav-link team">胜因官网</a>
    </li>
    <li>
    <a target="_blank" rel="noopener" href="//jaden.tech/resume?t=1686451604220" class="nav-link team">我的简历</a>
    </li>
  </ul>
</li>

  </ul>
</div>

    
    

    
      <div id="main" class="fix-sidebar">
        
          
  <div class="sidebar">
  <div class="sidebar-inner">
    <ul class="main-menu">
      <li>
  <form id="search-form">
    <input type="text" id="search-query-sidebar" class="search-query st-default-search-input">
  </form>
</li>
<li class="nav-dropdown-container learn">
  <a class="nav-link current">生态系统</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><h4>应用实例</h4></li>
    <li>
      <ul>
        <li><a href="/application/syp-wxmp.html" class="nav-link">胜因学院<small>(小程序)</small></a></li>
        <li><a href="/application/syp-android-tv.html" class="nav-link">胜因盒子<small>(TV大屏)</small></a></li>
      </ul>
    </li>
  </ul>
</li>

<li class="nav-dropdown-container learn">
  <a class="nav-link current">开发文档</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="/developer/guide.html" class="nav-link current">规范指南</a></li>
    <li><h4>编程规范</h4></li>
    <li>
      <ul>
        <li><a href="/developer/style-guide/gitlab.html" class="nav-link">Gitlab</a></li>
        <li><a href="/developer/style-guide/java.html" class="nav-link">Java</a></li>
        <li><a href="/developer/style-guide/mysql.html" class="nav-link">MySQL</a></li>
        <li><a href="/developer/style-guide/javascript.html" class="nav-link">Javascript</a></li>
        <li><a href="/developer/style-guide/cdn.html" class="nav-link">CDN 运维</a></li>
      </ul>
    </li>
    <li><h4>开发规范</h4></li>
    <li>
      <ul>
        <li><a href="/developer/environment-guide.html" class="nav-link">环境规范<small></small></a></li>
        <li><a href="/developer/etl-devops-guide.html" class="nav-link">ETL 运维<small></small></a></li>
        <li><a href="/developer/api-design-guide.html" class="nav-link">API 设计<small></small></a></li>
        <li><a href="/developer/rdc-guide.html" class="nav-link">RDC 接口<small></small></a></li>
        <li><a href="/developer/menu-guide.html" class="nav-link">业务菜单<small></small></a></li>
      </ul>
    </li>
    <li><h4>接口文档</h4></li>
    <li>
      <ul>
        <li><a href="/developer/api-guide/syp-wxmp.html" class="nav-link">胜因学院<small>(小程序)</small></a></li>
        <li><a href="/developer/api-guide/datav-report.html" class="nav-link">DataV报表<small>(大屏)</small></a></li>
        <li><a href="/developer/api-guide/java-admin-add-module.html" class="nav-link">添加模块<small>(运营平台)</small></a></li>
      </ul>
    </li>
    <li><h4>项目源码</h4></li>
    <li>
      <ul>
        <li><a href="/developer/project-connections.html" class="nav-link">源码体系</a></li>
        <li><a href="/developer/sypctl-readme.html" class="nav-link">SypCtl 工具</a></li>
        <li><a href="/developer/jenkins-deploy.html" class="nav-link">Jenkins 部署</a></li>
      </ul>
    </li>
  </ul>
</li>

<li class="nav-dropdown-container learn">
  <a class="nav-link current">企业文化</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><h4>职场培训</h4></li>
    <li>
      <ul>
        <li><a href="/corporate-culture/workplace-ceremony.html" class="nav-link">职场共识</a></li>
        <li><a href="/corporate-culture/teamwork.html" class="nav-link">职场协作</a></li>
      </ul>
    </li>
    <li><h4>生命力</h4></li>
    <li>
      <ul>
        <li><a href="/corporate-culture/online-documents.html" class="nav-link">在线文档</a></li>
        <li><a href="/corporate-culture/weekly-publication.html" class="nav-link">胜因周刊</a></li>
      </ul>
    </li>
  </ul>
</li>


<li class="nav-dropdown-container learn">
  <a class="nav-link current">外链导航</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li>
    <a href="https://www.intfocus.com" target="_blank" class="nav-link team">胜因官网</a>
    </li>
    <li>
    <a target="_blank" rel="noopener" href="//jaden.tech/resume?t=1686451604220" class="nav-link team">我的简历</a>
    </li>
  </ul>
</li>

    </ul>
    <div class="list">
      
      
        <h2>
          
          
          
        </h2>
        <ul class="menu-root">
  
    
    
    <li>
      <a href="/developer/style-guide/tips-to-keep-javascript-code-clean.html" class="sidebar-link current">整洁 Javascript 代码</a>
    </li>
  
</ul>

      
    </div>
  </div>
</div>

<!--
<div id="sidebar-sponsors-platinum-right">
  <div class="main-sponsor">
    <span>白金赞助商</span>
    <div>
    <a href="https://bit.dev/?utm_source=vue&utm_medium=vue&utm_campaign=vue&utm_term=vue&utm_content=vue" target="_blank" class="logo">
      <img src="/images/bit.png" alt="Bit">
    </a>
    <a href="http://tooltwist.com/" target="_blank" class="logo">
      <img src="/images/tooltwist.png" alt="Tooltwist">
    </a>
    <a href="https://vueschool.io/?utm_source=Vuejs.org&utm_medium=Banner&utm_campaign=Sponsored%20Banner&utm_content=V1" target="_blank" class="logo">
      <img src="/images/vueschool.png" alt="VueSchool">
    </a>
    <a href="https://vehikl.com/" target="_blank" class="logo">
      <img src="/images/vehikl.png" alt="Vehikl">
    </a>
    <a href="https://www.nativescript.org/vue?utm_source=vue-js-org&utm_medium=website&utm_campaign=nativescript-awareness" target="_blank" class="logo">
      <img src="/images/nativescript.png" alt="NativeScript">
    </a>
    <a href="https://teeplusplusclth.com/" target="_blank" class="logo">
      <img src="/images/tee__.png" alt="Tee++">
    </a>
    </div>
  </div>
  <a class="become-backer" href="/support-vuejs">
    成为赞助者
  </a>
</div>

-->


<div class="content 整洁 Javascript 代码 with-sidebar ">
  
    
      
    
  
  
    <h1>整洁 Javascript 代码</h1>
  

  

  
    <h2 id="善用内置函数"><a href="#善用内置函数" class="headerlink" title="善用内置函数"></a>善用内置函数</h2><h3 id="find-x2F-findIndex"><a href="#find-x2F-findIndex" class="headerlink" title="find&#x2F;findIndex"></a>find&#x2F;findIndex</h3><p><em>冗余场景：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">let array = [1, 2, 3, 4],<br>    item,<br>    index;<br><br>// scene1<br>for(let i = 0, len = array.length; i &lt; len; i ++) &#123;<br>  if(array[i] &gt;= 1) &#123;<br>    item = array[i];<br>  &#125;<br>&#125;<br>// scene2<br>for(let i = 0, len = array.length; i &lt; len; i ++) &#123;<br>  if(array[i] &gt;= 3) &#123;<br>    index = i;<br>  &#125;<br>&#125;<br>// priority use a `for` when scene1 and scene2 meet<br></code></pre></td></tr></table></figure>

<p><em>整洁方案：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">item = array.find(function(ele) &#123; return ele &gt;= 1; &#125;)<br>=&gt; 1<br>index = array.findIndex(function(ele) &#123; return ele &gt;= 3; &#125;)<br>=&gt; 2<br></code></pre></td></tr></table></figure>

<h3 id="filter-x2F-some"><a href="#filter-x2F-some" class="headerlink" title="filter&#x2F;some"></a>filter&#x2F;some</h3><p><em>冗余场景：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">let array = [1, 2, 3, 4],<br>    filterArray = [],<br>    isBetween2And4 = false;<br><br>for(let i = 0, len = array.length; i &lt; len; i ++) &#123;<br>  if(array[i] &gt;= 3) &#123;<br>    filterArray.push(array[i])<br>  &#125;<br>  if(array[i] &gt; 2 &amp;&amp; array[i] &lt; 4) &#123;<br>    isBetween2And4 = true<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><em>整洁方案：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">filterArray = array.filter(function(ele) &#123; return ele &gt;= 3; &#125;)<br>=&gt; [3, 4]<br>isBetween2And4 = array.some(function(ele) &#123; return ele &gt; 2 &amp;&amp; ele &lt; 4; &#125;)<br>=&gt; true<br></code></pre></td></tr></table></figure>

<h3 id="map"><a href="#map" class="headerlink" title="map"></a>map</h3><p><em>冗余场景：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">let array = [1, 2, 3, 4],<br>    newArray = [];<br><br>for(let i = 0, len = array.length; i &lt; len; i ++) &#123;<br>  newArray.push(array[i] * 2)<br>&#125;<br></code></pre></td></tr></table></figure>

<p><em>整洁方案：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">newArray = array.map(function(ele) &#123; return ele * 2; &#125;)<br>=&gt; [2, 4, 6, 8]<br></code></pre></td></tr></table></figure>

<h3 id="reduce-x2F-reduceRight"><a href="#reduce-x2F-reduceRight" class="headerlink" title="reduce&#x2F;reduceRight"></a>reduce&#x2F;reduceRight</h3><p><em>冗余场景：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">let array = [1, 2, 3, 4],<br>    json = &#123;&#125;;<br><br>for(let i = 0, len = array.length; i &lt; len; i ++) &#123;<br>  json[i] = array[i]<br>&#125;<br></code></pre></td></tr></table></figure>

<p><em>整洁方案：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">json = array.reduce(function(json, ele, inx, arr) &#123; json[inx] = ele; return json; &#125;, &#123;&#125;)<br>=&gt; &#123;0: 1, 1: 2, 2: 3, 3: 4&#125;<br>array.reduceRight(function(json, ele, inx, arr) &#123; console.log(ele); return json; &#125;, &#123;&#125;)<br>=&gt; 4 3 2 1<br></code></pre></td></tr></table></figure>

<h2 id="可检索的名称"><a href="#可检索的名称" class="headerlink" title="可检索的名称"></a>可检索的名称</h2><p>写可读性强、易于检索的的代码非常重要。</p>
<p><em>冗余场景：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">for (let i = 0; i &lt; 525600; i++) &#123;<br>  runCronJob();<br>&#125;<br></code></pre></td></tr></table></figure>

<p><em>整洁方案：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">// `let` 申明为大写的全局变量<br>let MINUTES_IN_A_YEAR = 525600;<br>for (let i = 0; i &lt; MINUTES_IN_A_YEAR; i++) &#123;<br>  runCronJob();<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="解析性的变量"><a href="#解析性的变量" class="headerlink" title="解析性的变量"></a>解析性的变量</h2><p><em>冗余场景：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">const cityStateRegex = /^(.+)[,\\s]+(.+?)\s*(\d&#123;5&#125;)?$/;<br>saveCityState(cityStateRegex.match(cityStateRegex)[1], cityStateRegex.match(cityStateRegex)[2]);<br></code></pre></td></tr></table></figure>

<p><em>整洁方案：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">const cityStateRegex = /^(.+)[,\\s]+(.+?)\s*(\d&#123;5&#125;)?$/,<br>      match = cityStateRegex.match(cityStateRegex),<br>      city = match[1],<br>      state = match[2];<br><br>saveCityState(city, state);<br></code></pre></td></tr></table></figure>

<h2 id="显式优于隐式"><a href="#显式优于隐式" class="headerlink" title="显式优于隐式"></a>显式优于隐式</h2><p><em>晦涩场景：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">let locations = [&#x27;Austin&#x27;, &#x27;New York&#x27;, &#x27;San Francisco&#x27;];<br>locations.forEach((l) =&gt; &#123;<br>  doStuff();<br>  doSomeOtherStuff();<br>  ...<br>  ...<br>  ...<br>  // 等等，`l` 又是什么？<br>  dispatch(l);<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><em>整洁方案：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">let locations = [&#x27;Austin&#x27;, &#x27;New York&#x27;, &#x27;San Francisco&#x27;];<br>locations.forEach((location) =&gt; &#123;<br>  doStuff();<br>  doSomeOtherStuff();<br>  ...<br>  ...<br>  ...<br>  dispatch(location);<br>&#125;);<br></code></pre></td></tr></table></figure>

<h2 id="短路语法更清晰"><a href="#短路语法更清晰" class="headerlink" title="短路语法更清晰"></a>短路语法更清晰</h2><p><em>冗余场景：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">function createMicrobrewery(name) &#123;<br>  let breweryName;<br>  if (name) &#123;<br>    breweryName = name;<br>  &#125; else &#123;<br>    breweryName = &#x27;Hipster Brew Co.&#x27;;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><em>整洁方案：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">function createMicrobrewery(name) &#123;<br>  let breweryName = name || &#x27;Hipster Brew Co.&#x27;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="函数参数不多于2"><a href="#函数参数不多于2" class="headerlink" title="函数参数不多于2"></a>函数参数不多于2</h2><p><em>冗余场景：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">function createMenu(title, body, buttonText, cancellable) &#123;<br>  ...<br>&#125;<br></code></pre></td></tr></table></figure>

<p><em>整洁方案：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">let menuConfig = &#123;<br>  title: &#x27;Foo&#x27;,<br>  body: &#x27;Bar&#x27;,<br>  buttonText: &#x27;Baz&#x27;,<br>  cancellable: true<br>&#125;<br> <br>function createMenu(menuConfig) &#123;<br>  ...<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="一个函数专注一件事"><a href="#一个函数专注一件事" class="headerlink" title="一个函数专注一件事"></a>一个函数专注一件事</h2><p><em>冗余场景：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">function emailClients(clients) &#123;<br>  clients.forEach(client =&gt; &#123;<br>    let clientRecord = database.lookup(client);<br>    if (clientRecord.isActive()) &#123;<br>      email(client);<br>    &#125;<br>  &#125;);<br>&#125;<br></code></pre></td></tr></table></figure>

<p><em>整洁方案：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">function emailClients(clients) &#123;<br>  clients.forEach(client =&gt; &#123;<br>    emailClientIfNeeded(client);<br>  &#125;);<br>&#125;<br> <br>function emailClientIfNeeded(client) &#123;<br>  if (isClientActive(client)) &#123;<br>    email(client);<br>  &#125;<br>&#125;<br> <br>function isClientActive(client) &#123;<br>  let clientRecord = database.lookup(client);<br>  return clientRecord.isActive();<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="函数名称见名知义"><a href="#函数名称见名知义" class="headerlink" title="函数名称见名知义"></a>函数名称见名知义</h2><p><em>晦涩场景：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">function dateAdd(date, month) &#123;<br>  // ...<br>&#125;<br><br>let date = new Date();<br>dateAdd(date, 1);<br></code></pre></td></tr></table></figure>

<p><em>整洁方案：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">function dateAddMonth(date, month) &#123;<br>  // ...<br>&#125;<br><br>let date = new Date();<br>dateAddMonth(date, 1);<br></code></pre></td></tr></table></figure>

<h2 id="函数只抽象一个层次"><a href="#函数只抽象一个层次" class="headerlink" title="函数只抽象一个层次"></a>函数只抽象一个层次</h2><p>整洁理念: 拆分函数使其易于复用和易于测试</p>
<p><em>冗余场景：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">function parseBetterJSAlternative(code) &#123;<br>  let REGEXES = [...],<br>      statements = code.split(&#x27; &#x27;),<br>      tokens;<br>  REGEXES.forEach((REGEX) =&gt; &#123;<br>    statements.forEach((statement) =&gt; &#123;<br>      // ...<br>    &#125;)<br>  &#125;);<br><br>  let ast;<br>  tokens.forEach((token) =&gt; &#123;<br>    // lex...<br>  &#125;);<br><br>  ast.forEach((node) =&gt; &#123;<br>    // parse...<br>  &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>

<p><em>整洁方案：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">function tokenize(code) &#123;<br>  let REGEXES = [...],<br>      statements = code.split(&#x27; &#x27;),<br>      tokens;<br>  REGEXES.forEach((REGEX) =&gt; &#123;<br>    statements.forEach((statement) =&gt; &#123;<br>      // ...<br>    &#125;)<br>  &#125;);<br><br>  return tokens;<br>&#125;<br> <br>function lexer(tokens) &#123;<br>  let ast;<br>  tokens.forEach((token) =&gt; &#123;<br>    // lex...<br>  &#125;);<br><br>  return ast;<br>&#125;<br> <br>function parseBetterJSAlternative(code) &#123;<br>  let tokens = tokenize(code);<br>  let ast = lexer(tokens);<br>  ast.forEach((node) =&gt; &#123;<br>    // parse...<br>  &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="删除重复代码"><a href="#删除重复代码" class="headerlink" title="删除重复代码"></a>删除重复代码</h2><p>JavaScript 是弱类型语句，所以很容易写通用性强的函数</p>
<p><em>冗余场景：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">function showDeveloperList(developers) &#123;<br>  developers.forEach(developers =&gt; &#123;<br>    let expectedSalary = developer.calculateExpectedSalary();<br>    let experience = developer.getExperience();<br>    let githubLink = developer.getGithubLink();<br>    let data = &#123;<br>      expectedSalary: expectedSalary,<br>      experience: experience,<br>      githubLink: githubLink<br>    &#125;;<br><br>    render(data);<br>  &#125;);<br>&#125;<br><br>function showManagerList(managers) &#123;<br>  managers.forEach(manager =&gt; &#123;<br>    let expectedSalary = manager.calculateExpectedSalary();<br>    let experience = manager.getExperience();<br>    let portfolio = manager.getMBAProjects();<br>    let data = &#123;<br>      expectedSalary: expectedSalary,<br>      experience: experience,<br>      portfolio: portfolio<br>    &#125;;<br><br>    render(data);<br>  &#125;);<br>&#125;<br></code></pre></td></tr></table></figure>

<p><em>整洁方案：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">function showList(employees) &#123;<br>  employees.forEach(employee =&gt; &#123;<br>    let expectedSalary = employee.calculateExpectedSalary(),<br>        experience = employee.getExperience(),<br>        portfolio;<br><br>    if (employee.type === &#x27;manager&#x27;) &#123;<br>      portfolio = employee.getMBAProjects();<br>    &#125; else &#123;<br>      portfolio = employee.getGithubLink();<br>    &#125;<br><br>    let data = &#123;<br>      expectedSalary: expectedSalary,<br>      experience: experience,<br>      portfolio: portfolio<br>    &#125;;<br><br>    render(data);<br>  &#125;);<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="默认参数-amp-短路语法"><a href="#默认参数-amp-短路语法" class="headerlink" title="默认参数&amp;短路语法"></a>默认参数&amp;短路语法</h2><p><em>冗余场景：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">function writeForumComment(subject, body) &#123;<br>  subject = subject || &#x27;No Subject&#x27;;<br>  body = body || &#x27;No text&#x27;;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><em>整洁方案：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">function writeForumComment(subject = &#x27;No subject&#x27;, body = &#x27;No text&#x27;) &#123;<br>  ...<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="Object-assign-用法"><a href="#Object-assign-用法" class="headerlink" title="Object.assign 用法"></a><code>Object.assign</code> 用法</h2><p><em>冗余场景：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">let menuConfig = &#123;<br>  title: null,<br>  body: &#x27;Bar&#x27;,<br>  buttonText: null,<br>  cancellable: true<br>&#125;<br> <br>function createMenu(config) &#123;<br>  config.title = config.title || &#x27;Foo&#x27;<br>  config.body = config.body || &#x27;Bar&#x27;<br>  config.buttonText = config.buttonText || &#x27;Baz&#x27;<br>  config.cancellable = config.cancellable === undefined ? config.cancellable : true;<br>&#125;<br> <br>createMenu(menuConfig);<br></code></pre></td></tr></table></figure>

<p><em>整洁方案：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">let menuConfig = &#123;<br>  title: &#x27;Order&#x27;,<br>  buttonText: &#x27;Send&#x27;,<br>  cancellable: true<br>&#125;<br> <br>function createMenu(config) &#123;<br> config = Object.assign(&#123;<br>     title: &#x27;Foo&#x27;,<br>     body: &#x27;Bar&#x27;,<br>     buttonText: &#x27;Baz&#x27;,<br>     cancellable: true<br>   &#125;, config);<br>&#125;<br> <br>createMenu(menuConfig);<br></code></pre></td></tr></table></figure>

<h2 id="不要写入全局函数"><a href="#不要写入全局函数" class="headerlink" title="不要写入全局函数"></a>不要写入全局函数</h2><p><em>冗余场景：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">Array.prototype.diff = function(comparisonArray) &#123;<br>  let values = [];<br>  let hash = &#123;&#125;;<br><br>  for (let i of comparisonArray) &#123;<br>    hash[i] = true;<br>  &#125;<br><br>  for (let i of this) &#123;<br>    if (!hash[i]) &#123;<br>      values.push(i);<br>    &#125;<br>  &#125;<br><br>  return values;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><em>整洁方案：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">class SuperArray extends Array &#123;<br>  constructor(...args) &#123;<br>    super(...args);<br>  &#125;<br><br>  diff(comparisonArray) &#123;<br>    let values = [];<br>    let hash = &#123;&#125;;<br><br>    for (let i of comparisonArray) &#123;<br>      hash[i] = true;<br>    &#125;<br><br>    for (let i of this) &#123;<br>      if (!hash[i]) &#123;<br>        values.push(i);<br>      &#125;<br>    &#125;<br><br>    return values;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="函数式编程"><a href="#函数式编程" class="headerlink" title="函数式编程"></a>函数式编程</h2><p><em>冗余场景：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">const programmerOutput = [<br>  &#123;<br>    name: &#x27;Uncle Bobby&#x27;,<br>    linesOfCode: 500<br>  &#125;, &#123;<br>    name: &#x27;Suzie Q&#x27;,<br>    linesOfCode: 1500<br>  &#125;, &#123;<br>    name: &#x27;Jimmy Gosling&#x27;,<br>    linesOfCode: 150<br>  &#125;, &#123;<br>    name: &#x27;Gracie Hopper&#x27;,<br>    linesOfCode: 1000<br>  &#125;<br>];<br> <br>let totalOutput = 0;<br>for (let i = 0; i &lt; programmerOutput.length; i++) &#123;<br>  totalOutput += programmerOutput[i].linesOfCode;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><em>整洁方案：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">const programmerOutput = [<br>  &#123;<br>    name: &#x27;Uncle Bobby&#x27;,<br>    linesOfCode: 500<br>  &#125;, &#123;<br>    name: &#x27;Suzie Q&#x27;,<br>    linesOfCode: 1500<br>  &#125;, &#123;<br>    name: &#x27;Jimmy Gosling&#x27;,<br>    linesOfCode: 150<br>  &#125;, &#123;<br>    name: &#x27;Gracie Hopper&#x27;,<br>    linesOfCode: 1000<br>  &#125;<br>];<br> <br> <br>let totalOutput = programmerOutput<br>  .map((programmer) =&gt; programmer.linesOfCode)<br>  .reduce((acc, linesOfCode) =&gt; acc + linesOfCode, 0);<br></code></pre></td></tr></table></figure>

<h2 id="封装条件"><a href="#封装条件" class="headerlink" title="封装条件"></a>封装条件</h2><p><em>冗余场景：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">if (fsm.state === &#x27;fetching&#x27; &amp;&amp; isEmpty(listNode)) &#123;<br>  // ...<br>&#125;<br></code></pre></td></tr></table></figure>

<p><em>整洁方案：</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">function shouldShowSpinner(fsm, listNode) &#123;<br>  return fsm.state === &#x27;fetching&#x27; &amp;&amp; isEmpty(listNode);<br>&#125;<br> <br>if (shouldShowSpinner(fsmInstance, listNodeInstance)) &#123;<br>  // ...<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.jb51.net/article/149355.htm">浅谈JavaScript 代码整洁之道</a></li>
</ul>

  
  
  
</div>

        
      </div>
      <script src="/js/smooth-scroll.min.js"></script>
    

    <script src="/js/css.escape.js"></script>
    <script src="/js/common.js"></script>

    <link href="//code.bdstatic.com/npm/docsearch.js@1.5.0/dist/cdn/docsearch.min.css" rel='stylesheet' type='text/css'>
    
<link rel="stylesheet" href="/css/search.css">

    <script src="//code.bdstatic.com/npm/docsearch.js@1.5.0/dist/cdn/docsearch.min.js"></script>
    <script>
    [
      '#search-query-nav',
      '#search-query-sidebar',
      '#search-query-menu'
    ].forEach(function (selector) {
      if (!document.querySelector(selector)) return
      // search index defaults to v2
      var match = window.location.pathname.match(/^\/(v\d+)/)
      var version = match ? match[1] : 'v2'
      docsearch({
      appId: 'BH4D9OD16A',
      apiKey: '5638280abff9d207417bb03be05f0b25',
      indexName: 'vuejs_cn2',
      inputSelector: selector,
      algoliaOptions: { facetFilters: ["version:" + version] },
      autocompleteOptions: { hint: false, appendTo: 'body'}
      })
    })
    </script>

    <!-- fastclick -->
    <script src="//code.bdstatic.com/npm/fastclick@1.0.6/lib/fastclick.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
      FastClick.attach(document.body)
    }, false)
    </script>
  </body>
</html>
